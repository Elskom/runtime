name: Submodule Update

on:
  push:
    branches: [ main ]
    tags:
    - '*'
  schedule:
  - cron: '*/20 * * * *'

jobs:
  submodule-update:
    runs-on: windows-latest
    steps:
    - uses: actions/checkout@main
      with:
        # we need the submodule to Sdk.
        submodules: recursive

    - name: Update submodule.
      run: git submodule update --remote

    - name: Create Pull Request
      id: cpr
      uses: peter-evans/create-pull-request@main
      with:
        token: ${{ secrets.GITSYNC_TOKEN }}
        commit-message: Update Sdk submodule.
        committer: GitHub <noreply@github.com>
        author: Elskom-gitsync <77945129+Elskom-gitsync@users.noreply.github.com>
        signoff: true
        branch: app/updated-submodules
        base: main
        delete-branch: true
        title: '[Sdk] Update submodule.'
        body: |
          Update submodule
          - Auto-generated by [create-pull-request][1]

          [1]: https://github.com/peter-evans/create-pull-request
        draft: false
